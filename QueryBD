CREATE TABLE usuario (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    senha VARCHAR(100) NOT NULL -- Aqui deve ser armazenado um hash em produção
);

-- Tabela de categorias
CREATE TABLE categoria (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    usuario_id INT REFERENCES usuario(id) ON DELETE CASCADE
);

-- Tabela de contas
CREATE TABLE conta (
    id SERIAL PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    saldo_inicial NUMERIC(10,2) NOT NULL,
    usuario_id INT REFERENCES usuario(id) ON DELETE CASCADE
);

-- Tabela de transações
CREATE TABLE transacao (
    id SERIAL PRIMARY KEY,
    tipo VARCHAR(10) CHECK (tipo IN ('receita', 'despesa')) NOT NULL,
    valor NUMERIC(10,2) NOT NULL,
    data DATE NOT NULL,
    descricao VARCHAR(200),
    categoria_id INT REFERENCES categoria(id) ON DELETE SET NULL,
    conta_id INT REFERENCES conta(id) ON DELETE SET NULL,
    usuario_id INT REFERENCES usuario(id) ON DELETE CASCADE
);

